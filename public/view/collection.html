
<div ng-if="devices.isSearching">
  <h1>Search Results</h1>
  <button ng-click="devices.endSearch()">back to my devices</button><br>
  <input type="text" ng-model="devices.searchQuery">
  <button ng-click="devices.search(devices.searchQuery)">search</button>
  <p ng-repeat="item in devices.results track by item.id" class="item">
    {{item.title}}
    <img ng-if="item.image && item.image.thumbnail" ng-src="{{item.image.thumbnail}}">
    <button ng-if="!(devices.viewModelSet[item.namespace] && devices.viewModelSet[item.namespace][item.title])" ng-click="devices.add(item)">
      add
    </button>
    <button ng-if="devices.viewModelSet[item.namespace] && devices.viewModelSet[item.namespace][item.title]" ng-click="devices.removeById(item.namespace, item.title)">
      remove
    </button>
  </p>
</div>

<div ng-if="!devices.isSearching">
  <h1>Search</h1>
  <input type="text" ng-model="devices.searchQuery">
  <button ng-click="devices.search(devices.searchQuery)">search</button>
  <h1>Your devices</h1>
  <p ng-repeat="item in devices.viewModelList track by item.id" class="item">
    {{item.title}}
    <img ng-if="item.image && item.image.thumbnail" ng-src="{{item.image.thumbnail}}">
    <button ng-click="devices.remove($index)">
      remove
    </button>
  </p>
</div>